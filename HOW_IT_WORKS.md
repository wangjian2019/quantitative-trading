# ğŸ” AIé‡åŒ–äº¤æ˜“å¹³å°å·¥ä½œåŸç†è¯¦è§£

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸŒ Webæµè§ˆå™¨ç•Œé¢ (ç«¯å£8080)                                â”‚
â”‚                     http://localhost:8080                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ HTTPè¯·æ±‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          â˜• Javaå¹³å°æœåŠ¡ (ç«¯å£8080)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚TradingEngineâ”‚  â”‚DataManager  â”‚  â”‚UIController â”‚  â”‚Notification â”‚  â”‚Portfolio    â”‚ â”‚
â”‚  â”‚äº¤æ˜“å¼•æ“     â”‚  â”‚æ•°æ®ç®¡ç†     â”‚  â”‚ç•Œé¢æ§åˆ¶     â”‚  â”‚é€šçŸ¥æœåŠ¡     â”‚  â”‚æŠ•èµ„ç»„åˆ     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ HTTPè°ƒç”¨AIæ¨¡å‹
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ Python AIæ¨¡å‹æœåŠ¡ (ç«¯å£5001)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ç‰¹å¾å·¥ç¨‹     â”‚  â”‚RandomForest â”‚  â”‚GradientBoostâ”‚  â”‚LogisticReg  â”‚  â”‚ä¿¡å·ç”Ÿæˆ     â”‚ â”‚
â”‚  â”‚39ä¸ªç‰¹å¾     â”‚  â”‚éšæœºæ£®æ—     â”‚  â”‚æ¢¯åº¦æå‡     â”‚  â”‚é€»è¾‘å›å½’     â”‚  â”‚BUY/SELL/HOLDâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ è·å–å¸‚åœºæ•°æ®
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ğŸ“Š å¤–éƒ¨æ•°æ®æº                                          â”‚
â”‚     Yahoo Finance    â”‚    Alpha Vantage    â”‚    IEX Cloud    â”‚    å®æ—¶è¡Œæƒ…         â”‚
â”‚     å…è´¹æ•°æ®æº       â”‚    éœ€è¦API Key      â”‚    éœ€è¦API Key   â”‚    WebSocket        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Javaè°ƒç”¨Pythonçš„è¯¦ç»†æœºåˆ¶

### 1. ğŸ“¡ HTTPé€šä¿¡åè®®

#### Javaç«¯å‘èµ·è°ƒç”¨
```java
// AIStrategyClient.java - è´Ÿè´£ä¸PythonæœåŠ¡é€šä¿¡
public class AIStrategyClient {
    private final String apiUrl = "http://localhost:5001";  // PythonæœåŠ¡åœ°å€
    
    public AISignal getSignal(String symbol, KlineData currentData, 
                             Map<String, Double> indicators, List<KlineData> history) {
        
        // ğŸ”§ æ­¥éª¤1: å‡†å¤‡è¯·æ±‚æ•°æ®
        Map<String, Object> request = new HashMap<>();
        request.put("symbol", symbol);                    // è‚¡ç¥¨ä»£ç 
        request.put("current_data", currentData);         // å½“å‰Kçº¿æ•°æ®
        request.put("indicators", indicators);            // æŠ€æœ¯æŒ‡æ ‡
        request.put("history", history);                  // å†å²æ•°æ®ï¼ˆæœ€è¿‘100æ¡ï¼‰
        
        // ğŸ”§ æ­¥éª¤2: åºåˆ—åŒ–ä¸ºJSON
        String jsonRequest = objectMapper.writeValueAsString(request);
        
        // ğŸ”§ æ­¥éª¤3: æ„å»ºHTTP POSTè¯·æ±‚
        HttpPost httpPost = new HttpPost(apiUrl + "/get_signal");
        httpPost.setHeader("Content-Type", "application/json");
        httpPost.setEntity(new StringEntity(jsonRequest, "UTF-8"));
        
        // ğŸ”§ æ­¥éª¤4: å‘é€è¯·æ±‚å¹¶å¤„ç†å“åº”
        try (CloseableHttpResponse response = httpClient.execute(httpPost)) {
            String responseBody = EntityUtils.toString(response.getEntity());
            
            // ğŸ”§ æ­¥éª¤5: ååºåˆ—åŒ–Pythonè¿”å›çš„ç»“æœ
            return objectMapper.readValue(responseBody, AISignal.class);
        }
    }
}
```

#### è¯·æ±‚æ•°æ®ç»“æ„
```json
{
  "symbol": "TSLA",
  "current_data": {
    "timestamp": "2024-09-13T15:30:00",
    "open": 248.50,
    "high": 252.30,
    "low": 247.80,
    "close": 250.15,
    "volume": 1500000
  },
  "indicators": {
    "MA5": 249.20,      // 5æ—¥ç§»åŠ¨å¹³å‡
    "MA10": 248.80,     // 10æ—¥ç§»åŠ¨å¹³å‡
    "MA20": 245.80,     // 20æ—¥ç§»åŠ¨å¹³å‡
    "RSI": 45.5,        // ç›¸å¯¹å¼ºå¼±æŒ‡æ•°
    "MACD": 0.3,        // MACDæŒ‡æ ‡
    "VOLATILITY": 0.025, // æ³¢åŠ¨ç‡
    "VOLUME_RATIO": 1.2, // æˆäº¤é‡æ¯”ç‡
    "PRICE_POSITION": 0.6, // ä»·æ ¼ä½ç½®
    "ATR": 2.1          // å¹³å‡çœŸå®æ³¢åŠ¨èŒƒå›´
  },
  "history": [
    {"timestamp": "2024-09-12", "open": 245.0, "high": 247.0, "low": 244.0, "close": 246.5, "volume": 1200000},
    {"timestamp": "2024-09-11", "open": 246.5, "high": 249.0, "low": 245.5, "close": 248.2, "volume": 1350000},
    // ... æœ€è¿‘100æ¡å†å²Kçº¿æ•°æ®
  ]
}
```

### 2. ğŸ¤– Python AIå¤„ç†æµç¨‹

#### ai_model_service.py - AIæ¨¡å‹å¤„ç†
```python
@app.route('/get_signal', methods=['POST'])
def get_signal():
    # ğŸ“¥ æ­¥éª¤1: æ¥æ”¶Javaå‘é€çš„æ•°æ®
    data = request.json
    symbol = data.get('symbol')
    current_data = data.get('current_data', {})
    indicators = data.get('indicators', {})
    history = data.get('history', [])
    
    # ğŸ”§ æ­¥éª¤2: ç‰¹å¾å·¥ç¨‹ï¼ˆç”Ÿæˆ39ä¸ªç‰¹å¾ï¼‰
    features = ai_model.prepare_features(current_data, indicators, history)
    
    # ç‰¹å¾åŒ…æ‹¬ï¼š
    # - MAç›¸å¯¹ä½ç½®: ma5_ratio, ma10_ratio, ma20_ratio
    # - RSIçŠ¶æ€: rsi_oversold, rsi_overbought, rsi_neutral
    # - MACDä¿¡å·: macd_bullish, macd_strength
    # - ä»·æ ¼åŠ¨é‡: momentum_3, momentum_5
    # - æˆäº¤é‡: volume_ratio, high_volume, volume_surge
    # - å¸‚åœºæ—¶é—´: morning, afternoon, near_close
    # - é£é™©æŒ‡æ ‡: volatility, atr_ratio, risk_level
    # - è¶‹åŠ¿å¼ºåº¦: bullish_strength, bearish_strength
    
    # ğŸ¤– æ­¥éª¤3: å¤šæ¨¡å‹é›†æˆé¢„æµ‹
    feature_array = np.array([list(features.values())]).reshape(1, -1)
    feature_scaled = ai_model.scalers['main'].transform(feature_array)
    
    # ä¸‰ä¸ªæ¨¡å‹åˆ†åˆ«é¢„æµ‹
    ensemble_prob = np.zeros(3)  # [SELLæ¦‚ç‡, HOLDæ¦‚ç‡, BUYæ¦‚ç‡]
    
    for model_name, model in ai_model.models.items():
        prob = model.predict_proba(feature_scaled)[0]
        weight = ai_model.model_weights[model_name]  # rf:0.4, gb:0.4, lr:0.2
        ensemble_prob += weight * prob
    
    # ğŸ¯ æ­¥éª¤4: ç”Ÿæˆæœ€ç»ˆä¿¡å·
    final_prediction = np.argmax(ensemble_prob)  # é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„åŠ¨ä½œ
    confidence = np.max(ensemble_prob)           # æœ€é«˜æ¦‚ç‡ä½œä¸ºç½®ä¿¡åº¦
    action = {0: 'SELL', 1: 'HOLD', 2: 'BUY'}[final_prediction]
    
    # ğŸ“ æ­¥éª¤5: ç”Ÿæˆè§£é‡Š
    reason = generate_explanation(features, action, confidence)
    
    # ğŸ“¤ æ­¥éª¤6: è¿”å›ç»“æœç»™Java
    return jsonify({
        'action': action,           # å»ºè®®åŠ¨ä½œ: BUY/SELL/HOLD
        'confidence': confidence,   # ç½®ä¿¡åº¦: 0.0-1.0
        'reason': reason,          # å†³ç­–ç†ç”±
        'metadata': {              # é¢å¤–ä¿¡æ¯
            'model_predictions': predictions,
            'ensemble_probabilities': ensemble_prob,
            'key_features': top_5_features,
            'market_regime': market_state
        }
    })
```

#### å“åº”æ•°æ®ç»“æ„
```json
{
  "action": "BUY",
  "confidence": 0.852,
  "reason": "BUYä¿¡å· ç½®ä¿¡åº¦85.2%: å¼ºä¸Šå‡è¶‹åŠ¿, RSIè¶…å–, é«˜æˆäº¤é‡, å¼ºæ­£åŠ¨é‡",
  "metadata": {
    "model_predictions": {"rf": 2, "gb": 2, "lr": 1},
    "ensemble_probabilities": [0.05, 0.098, 0.852],
    "key_features": {
      "bullish_strength": 0.83,
      "momentum_5": 0.045,
      "rsi_oversold": 1.0,
      "high_volume": 1.0,
      "ma5_ratio": 0.018
    },
    "market_regime": "è¶‹åŠ¿å¸‚åœº"
  }
}
```

## ğŸ“Š æ•°æ®è·å–æœºåˆ¶è¯¦è§£

### 1. ğŸŒ å®æ—¶æ•°æ®è·å–

#### Yahoo Finance APIè°ƒç”¨
```java
// YahooFinanceDataSource.java
public KlineData getRealTimeData(String symbol) throws DataSourceException {
    try {
        // ğŸ”— æ­¥éª¤1: æ„å»ºAPI URL
        String url = String.format(
            "https://query1.finance.yahoo.com/v8/finance/chart/%s?interval=1d&range=1d", 
            symbol
        );
        
        // ğŸ“¡ æ­¥éª¤2: å‘é€HTTP GETè¯·æ±‚
        HttpGet request = new HttpGet(url);
        request.setHeader("User-Agent", "Mozilla/5.0 (AI Trading Platform)");
        
        try (CloseableHttpResponse response = httpClient.execute(request)) {
            String responseBody = EntityUtils.toString(response.getEntity());
            
            // ğŸ“Š æ­¥éª¤3: è§£æYahoo Finance JSONå“åº”
            JsonNode rootNode = objectMapper.readTree(responseBody);
            JsonNode chartNode = rootNode.path("chart").path("result").get(0);
            JsonNode meta = chartNode.path("meta");
            
            // ğŸ“ˆ æ­¥éª¤4: æå–OHLCVæ•°æ®
            double open = meta.path("previousClose").asDouble();
            double high = meta.path("regularMarketDayHigh").asDouble();
            double low = meta.path("regularMarketDayLow").asDouble();
            double close = meta.path("regularMarketPrice").asDouble();
            long volume = meta.path("regularMarketVolume").asLong();
            
            // ğŸ• æ­¥éª¤5: åˆ›å»ºæ—¶é—´æˆ³
            long timestamp = meta.path("regularMarketTime").asLong();
            LocalDateTime dateTime = LocalDateTime.ofEpochSecond(timestamp, 0, ZoneOffset.UTC);
            
            // ğŸ“¦ æ­¥éª¤6: è¿”å›æ ‡å‡†åŒ–æ•°æ®
            return new KlineData(dateTime, open, high, low, close, volume);
        }
    } catch (Exception e) {
        throw new DataSourceException("è·å–å®æ—¶æ•°æ®å¤±è´¥: " + e.getMessage());
    }
}
```

#### Yahoo Finance APIå“åº”ç¤ºä¾‹
```json
{
  "chart": {
    "result": [{
      "meta": {
        "currency": "USD",
        "symbol": "TSLA",
        "regularMarketPrice": 250.15,
        "previousClose": 248.50,
        "regularMarketDayHigh": 252.30,
        "regularMarketDayLow": 247.80,
        "regularMarketVolume": 1500000,
        "regularMarketTime": 1694678400
      },
      "timestamp": [1694678400],
      "indicators": {
        "quote": [{
          "open": [248.50],
          "high": [252.30],
          "low": [247.80],
          "close": [250.15],
          "volume": [1500000]
        }]
      }
    }]
  }
}
```

### 2. ğŸ“ˆ å†å²æ•°æ®è·å–

#### æ‰¹é‡å†å²æ•°æ®ä¸‹è½½
```java
public List<KlineData> getHistoricalData(String symbol, int days) throws DataSourceException {
    try {
        // ğŸ• æ­¥éª¤1: è®¡ç®—æ—¶é—´èŒƒå›´
        long endTime = System.currentTimeMillis() / 1000;
        long startTime = endTime - (days * 24 * 60 * 60);
        
        // ğŸ”— æ­¥éª¤2: æ„å»ºå†å²æ•°æ®API URL
        String url = String.format(
            "https://query1.finance.yahoo.com/v8/finance/chart/%s?period1=%d&period2=%d&interval=1d",
            symbol, startTime, endTime
        );
        
        // ğŸ“¡ æ­¥éª¤3: å‘é€è¯·æ±‚
        HttpGet request = new HttpGet(url);
        try (CloseableHttpResponse response = httpClient.execute(request)) {
            String responseBody = EntityUtils.toString(response.getEntity());
            JsonNode rootNode = objectMapper.readTree(responseBody);
            
            // ğŸ“Š æ­¥éª¤4: è§£ææ—¶é—´åºåˆ—æ•°æ®
            JsonNode resultNode = rootNode.path("chart").path("result").get(0);
            JsonNode timestamps = resultNode.path("timestamp");
            JsonNode indicators = resultNode.path("indicators").path("quote").get(0);
            
            // ğŸ“ˆ æ­¥éª¤5: æå–OHLCVæ•°ç»„
            JsonNode opens = indicators.path("open");
            JsonNode highs = indicators.path("high");
            JsonNode lows = indicators.path("low");
            JsonNode closes = indicators.path("close");
            JsonNode volumes = indicators.path("volume");
            
            // ğŸ”„ æ­¥éª¤6: æ„å»ºå†å²æ•°æ®åˆ—è¡¨
            List<KlineData> historicalData = new ArrayList<>();
            for (int i = 0; i < timestamps.size(); i++) {
                long timestamp = timestamps.get(i).asLong();
                LocalDateTime dateTime = LocalDateTime.ofEpochSecond(timestamp, 0, ZoneOffset.UTC);
                
                double open = opens.get(i).asDouble();
                double high = highs.get(i).asDouble();
                double low = lows.get(i).asDouble();
                double close = closes.get(i).asDouble();
                long volume = volumes.get(i).asLong();
                
                historicalData.add(new KlineData(dateTime, open, high, low, close, volume));
            }
            
            return historicalData;
        }
    } catch (Exception e) {
        throw new DataSourceException("è·å–å†å²æ•°æ®å¤±è´¥: " + e.getMessage());
    }
}
```

### 3. ğŸ”„ æ•°æ®æ›´æ–°å¾ªç¯

#### å®šæ—¶ä»»åŠ¡è°ƒåº¦
```java
// TradingEngine.java
public void start() {
    // ğŸ• ä»»åŠ¡1: å®æ—¶æ•°æ®æ”¶é›†ï¼ˆæ¯1åˆ†é’Ÿï¼‰
    scheduler.scheduleAtFixedRate(() -> {
        for (String symbol : config.getTradingSymbols()) {
            try {
                // 1. è·å–æœ€æ–°Kçº¿æ•°æ®
                KlineData latestData = dataSource.getRealTimeData(symbol);
                
                // 2. æ›´æ–°æ•°æ®ç¼“å­˜
                dataBuffer.addData(symbol, latestData);
                
                // 3. æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
                if (dataBuffer.hasEnoughData(symbol, 50)) {  // è‡³å°‘50æ¡æ•°æ®ç”¨äºæŒ‡æ ‡è®¡ç®—
                    // è§¦å‘AIåˆ†æ
                    scheduleAIAnalysis(symbol);
                }
                
                logger.info(String.format("âœ… æ›´æ–°%sæ•°æ®: $%.2f (æˆäº¤é‡: %,d)", 
                    symbol, latestData.getClose(), latestData.getVolume()));
                    
            } catch (DataSourceException e) {
                logger.warning("âŒ è·å–" + symbol + "æ•°æ®å¤±è´¥: " + e.getMessage());
            }
        }
    }, 0, 1, TimeUnit.MINUTES);
    
    // ğŸ• ä»»åŠ¡2: AIç­–ç•¥åˆ†æï¼ˆæ¯5åˆ†é’Ÿï¼‰
    scheduler.scheduleAtFixedRate(() -> {
        executeAIStrategy();
    }, 0, 5, TimeUnit.MINUTES);
    
    // ğŸ• ä»»åŠ¡3: æŠ•èµ„ç»„åˆè¯„ä¼°ï¼ˆæ¯15åˆ†é’Ÿï¼‰
    scheduler.scheduleAtFixedRate(() -> {
        evaluatePortfolio();
    }, 0, 15, TimeUnit.MINUTES);
}

private void executeAIStrategy() {
    for (String symbol : config.getTradingSymbols()) {
        try {
            // 1. è·å–å†å²æ•°æ®
            List<KlineData> history = dataBuffer.getHistory(symbol, 100);
            KlineData currentData = history.get(history.size() - 1);
            
            // 2. è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
            Map<String, Double> indicators = calculateTechnicalIndicators(history);
            
            // 3. ğŸ”¥ å…³é”®è°ƒç”¨: å‘Python AIæ¨¡å‹è¯·æ±‚é¢„æµ‹
            AISignal signal = aiStrategyClient.getSignal(symbol, currentData, indicators, history);
            
            // 4. å¤„ç†AIè¿”å›çš„ä¿¡å·
            processAISignal(symbol, signal, currentData);
            
        } catch (Exception e) {
            logger.severe("AIç­–ç•¥æ‰§è¡Œå¤±è´¥: " + e.getMessage());
        }
    }
}
```

## ğŸ“Š æ”¯æŒçš„è‚¡ç¥¨å’Œæ•°æ®æº

### 1. ğŸ‡ºğŸ‡¸ ç¾è‚¡æ•°æ®è·å–
```java
// æ”¯æŒçš„ç¾è‚¡æ ¼å¼
String[] usStocks = {
    "ASML",    // é˜¿æ–¯éº¦æ§è‚¡
    "TSLA",    // ç‰¹æ–¯æ‹‰
    "NBIS",    // Nebius Group
    "SE",      // Sea Limited
    "GRAB",    // Grab Holdings
    "MRVL",    // Marvell Technology
    "HIMS",    // Hims & Hers Health
    "NKE"      // è€å…‹
};

// Yahoo Finance URLæ ¼å¼
String url = "https://query1.finance.yahoo.com/v8/finance/chart/" + symbol;
```

### 2. ğŸ“ˆ ETFæ•°æ®è·å–
```java
// æ”¯æŒçš„ETF
String[] etfs = {
    "QQQ",     // çº³æ–¯è¾¾å…‹100 ETF
    "VOO",     // æ ‡æ™®500 ETF
    "FPE"      // ä¼˜å…ˆè‚¡ETF
};

// ä¸è‚¡ç¥¨ä½¿ç”¨ç›¸åŒçš„API
```

### 3. ğŸ‡­ğŸ‡° æ¸¯è‚¡æ•°æ®è·å–
```java
// æ¸¯è‚¡æ ¼å¼ï¼ˆéœ€è¦æ·»åŠ .HKåç¼€ï¼‰
String[] hkStocks = {
    "3690.HK"  // ç¾å›¢-W
};

// Yahoo Financeæ”¯æŒæ¸¯è‚¡
String url = "https://query1.finance.yahoo.com/v8/finance/chart/3690.HK";
```

## ğŸ”§ æŠ€æœ¯æŒ‡æ ‡è®¡ç®—è¯¦è§£

### 1. ğŸ“Š ç§»åŠ¨å¹³å‡çº¿è®¡ç®—
```java
private double calculateMA(double[] prices, int period) {
    if (prices.length < period) return 0;
    
    double sum = 0;
    for (int i = prices.length - period; i < prices.length; i++) {
        sum += prices[i];
    }
    return sum / period;
}
```

### 2. ğŸ“ˆ RSIè®¡ç®—
```java
private double calculateRSI(double[] prices, int period) {
    if (prices.length < period + 1) return 50;
    
    double[] gains = new double[prices.length - 1];
    double[] losses = new double[prices.length - 1];
    
    // è®¡ç®—æ¯æ—¥æ¶¨è·Œ
    for (int i = 0; i < prices.length - 1; i++) {
        double change = prices[i + 1] - prices[i];
        gains[i] = Math.max(change, 0);
        losses[i] = Math.max(-change, 0);
    }
    
    // è®¡ç®—å¹³å‡æ”¶ç›Šå’ŒæŸå¤±
    double avgGain = Arrays.stream(gains, gains.length - period, gains.length).average().orElse(0);
    double avgLoss = Arrays.stream(losses, losses.length - period, losses.length).average().orElse(0);
    
    if (avgLoss == 0) return 100;
    
    double rs = avgGain / avgLoss;
    return 100 - (100 / (1 + rs));
}
```

### 3. ğŸ“Š MACDè®¡ç®—
```java
private double[] calculateMACD(double[] prices) {
    // è®¡ç®—EMA12å’ŒEMA26
    double ema12 = calculateEMA(prices, 12);
    double ema26 = calculateEMA(prices, 26);
    
    // MACD = EMA12 - EMA26
    double macd = ema12 - ema26;
    
    // Signal Line = EMA9 of MACD
    double signal = macd; // ç®€åŒ–ç‰ˆæœ¬
    
    // Histogram = MACD - Signal
    double histogram = macd - signal;
    
    return new double[]{macd, signal, histogram};
}
```

## ğŸ”„ å®Œæ•´çš„æ•°æ®å¤„ç†æµç¨‹

### 1. ğŸš€ ç³»ç»Ÿå¯åŠ¨æ—¶
```java
// 1. åˆå§‹åŒ–æ•°æ®æº
DataSource dataSource = DataSourceFactory.createDataSource(config);

// 2. åŠ è½½å†å²æ•°æ®ï¼ˆç”¨äºæŒ‡æ ‡è®¡ç®—ï¼‰
for (String symbol : config.getTradingSymbols()) {
    List<KlineData> history = dataSource.getHistoricalData(symbol, 100);
    dataBuffer.initializeHistory(symbol, history);
}

// 3. å¯åŠ¨å®šæ—¶ä»»åŠ¡
startDataCollection();
startAIAnalysis();
```

### 2. ğŸ”„ è¿è¡Œæ—¶å¾ªç¯
```java
// æ¯åˆ†é’Ÿæ‰§è¡Œ
void collectRealTimeData() {
    for (String symbol : monitoredSymbols) {
        // 1. ä»Yahoo Financeè·å–æœ€æ–°æ•°æ®
        KlineData newData = yahooApi.getLatestData(symbol);
        
        // 2. æ›´æ–°æ•°æ®ç¼“å­˜
        dataBuffer.append(symbol, newData);
        
        // 3. ä¿æŒæ•°æ®çª—å£å¤§å°ï¼ˆæœ€è¿‘100æ¡ï¼‰
        dataBuffer.trimToSize(symbol, 100);
    }
}

// æ¯5åˆ†é’Ÿæ‰§è¡Œ
void executeAIAnalysis() {
    for (String symbol : monitoredSymbols) {
        // 1. å‡†å¤‡æ•°æ®
        List<KlineData> history = dataBuffer.getHistory(symbol);
        Map<String, Double> indicators = calculateIndicators(history);
        
        // 2. ğŸ”¥ è°ƒç”¨Python AIæ¨¡å‹
        AISignal signal = callPythonAI(symbol, history.get(-1), indicators, history);
        
        // 3. å¤„ç†ä¿¡å·
        if (signal.getConfidence() >= 0.75) {
            // å‘é€é€šçŸ¥
            sendNotification(symbol, signal);
            
            // è®°å½•äº¤æ˜“å»ºè®®
            logTradingSignal(symbol, signal);
        }
    }
}
```

### 3. ğŸ“Š å›æµ‹æ•°æ®å¤„ç†
```java
// BacktestEngine.java
public BacktestResult runBacktest(String symbol, int days) {
    // 1. è·å–è¶³å¤Ÿçš„å†å²æ•°æ®
    List<KlineData> allData = dataSource.getHistoricalData(symbol, days + 50);
    
    // 2. åˆ†å‰²æ•°æ®
    List<KlineData> warmupData = allData.subList(0, 50);      // ç”¨äºæŒ‡æ ‡è®¡ç®—
    List<KlineData> backtestData = allData.subList(50, allData.size());  // ç”¨äºå›æµ‹
    
    // 3. æ¨¡æ‹Ÿäº¤æ˜“
    double capital = 100000;  // åˆå§‹èµ„é‡‘
    int position = 0;         // æŒä»“æ•°é‡
    List<Trade> trades = new ArrayList<>();
    
    for (int i = 20; i < backtestData.size() - 1; i++) {
        KlineData currentData = backtestData.get(i);
        List<KlineData> history = backtestData.subList(0, i + 1);
        
        // è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
        Map<String, Double> indicators = calculateIndicators(history);
        
        // ğŸ”¥ è°ƒç”¨AIæ¨¡å‹è·å–ä¿¡å·
        AISignal signal = aiStrategyClient.getSignal(symbol, currentData, indicators, history);
        
        // æ‰§è¡Œäº¤æ˜“é€»è¾‘
        if (signal.getConfidence() >= 0.7) {
            if ("BUY".equals(signal.getAction()) && position == 0) {
                // ä¹°å…¥
                position = (int) (capital / currentData.getClose());
                capital = 0;
                trades.add(new Trade("BUY", currentData));
                
            } else if ("SELL".equals(signal.getAction()) && position > 0) {
                // å–å‡º
                capital = position * currentData.getClose();
                trades.add(new Trade("SELL", currentData));
                position = 0;
            }
        }
    }
    
    // 4. è®¡ç®—å›æµ‹æŒ‡æ ‡
    return calculatePerformanceMetrics(trades, 100000);
}
```

## ğŸ¯ å…³é”®æ–‡ä»¶ä½ç½®

### Javaç«¯æ ¸å¿ƒæ–‡ä»¶
- **AIStrategyClient.java**: è°ƒç”¨Python AIæ¨¡å‹
- **TradingEngine.java**: ä¸»äº¤æ˜“å¼•æ“
- **YahooFinanceDataSource.java**: Yahoo Financeæ•°æ®è·å–
- **EnhancedNotificationService.java**: é€šçŸ¥æœåŠ¡
- **application.properties**: ç³»ç»Ÿé…ç½®

### Pythonç«¯æ ¸å¿ƒæ–‡ä»¶
- **ai_model_service.py**: çº¯AIæ¨¡å‹æœåŠ¡
- **config.py**: PythonæœåŠ¡é…ç½®

### å‰ç«¯æ–‡ä»¶
- **index.html**: Webç•Œé¢
- **script.js**: å‰ç«¯é€»è¾‘
- **style.css**: ç•Œé¢æ ·å¼

## ğŸ§ª æµ‹è¯•éªŒè¯

åˆšæ‰çš„æµ‹è¯•æ˜¾ç¤ºç³»ç»Ÿæ­£å¸¸å·¥ä½œï¼š
- âœ… Python AIæœåŠ¡æ­£å¸¸è¿è¡Œ (ç«¯å£5001)
- âœ… Javaé¡¹ç›®ç¼–è¯‘æˆåŠŸ
- âœ… AIæ¨¡å‹é¢„æµ‹æ­£å¸¸ (ç½®ä¿¡åº¦77.8%ï¼ŒHOLDä¿¡å·)
- âœ… HTTPé€šä¿¡æ­£å¸¸
- âœ… JSONåºåˆ—åŒ–/ååºåˆ—åŒ–æ­£å¸¸

ç°åœ¨ä½ çš„AIé‡åŒ–äº¤æ˜“å¹³å°å·²ç»å…·å¤‡å®Œæ•´çš„æ•°æ®è·å–å’ŒAIé¢„æµ‹åŠŸèƒ½ï¼ğŸš€
